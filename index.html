<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organigramma â€” Benedetta Bruzziches</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #F8F7F4; font-family: 'Cormorant Garamond', Georgia, serif; color: #1A1A18; }
  button { font-family: inherit; }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState } = React;

const DEPTS = {
  stile:         { label: "Ufficio Stile",         color: "#8B6F4F", light: "#F7F0E8", dark: "#6B5030", reportTo: "Benedetta", side: "left" },
  comunicazione: { label: "Comunicazione",         color: "#4A6A8B", light: "#E8EFF7", dark: "#2A4A6B", reportTo: "Benedetta", side: "left" },
  digital:       { label: "Digital & E-commerce",  color: "#4A7A50", light: "#E8F4EA", dark: "#2A5A30", reportTo: "Benedetta + Agostino", side: "center" },
  admin:         { label: "Amministrazione & B2B", color: "#8B4A5E", light: "#F7E8EE", dark: "#6B2A3E", reportTo: "Agostino", side: "right" },
  produzione:    { label: "Produzione & Operations", color: "#5E4A8B", light: "#EFE8F7", dark: "#3E2A6B", reportTo: "Agostino", side: "right" },
};

const DEPT_LINKS = [
  { from: "stile",      to: "produzione",    label: "Campionario e schede tecniche",  desc: "Elisa (Stile) fa da ponte verso Giulio (Produzione) per il passaggio di prototipi e specifiche" },
  { from: "stile",      to: "comunicazione", label: "Supporto operativo shooting",    desc: "Elisa (Stile) supporta Roberta (Comms) come segreteria operativa per shooting e logistica creativi" },
  { from: "digital",    to: "comunicazione", label: "ADV Â· Newsletter Â· Sito",        desc: "Fabio â†” Roberta: ADV (budget vs contenuti), Newsletter (Klaviyo vs copy), Sito (tech vs content). Output e scadenze da definire" },
  { from: "admin",      to: "produzione",    label: "Materiali + Ordini B2B",         desc: "Alice elabora RdA in Team System da Giulio. Debora â†’ Simona per ordini B2B" },
  { from: "produzione", to: "digital",       label: "Spedizioni B2C + Stock",         desc: "Debora prepara pacchi B2C. Valentina gestisce DDT e corriere. Coordinamento stock magazzino e-commerce" },
  { from: "digital",    to: "admin",         label: "DDT Â· Corrieri Â· Press",         desc: "Caterina â†’ Simona â†’ Debora per spedizioni campioni press. Valentina per DDT e corrieri" },
];

const PEOPLE = {
  stile: {
    summary: "Cuore creativo del brand. Sviluppa l'identitÃ  estetica di ogni collezione: modelli, materiali, colori.",
    hierarchy: [
      { name: "Claudia", role: "Creative Lead", level: 0, desc: "Guida creativa quotidiana: ricerca, concept, sviluppo estetico modelli, materiali, colori, proporzioni" },
      { name: "Elisa", role: "Operations & Production Coord.", level: 0, badge: "Doppio ruolo",
        desc: "Coordina fornitori, schede tecniche, gestisce campionari e timing, magazzino materiali e campioni, catalogazione materiali e aggiornamento database Notion. Supporto diretto a Benedetta su task operative nei momenti di minor carico. Segreteria operativa per Comunicazione" },
    ],
    crossLinks: [
      { person: "Elisa", to: "Giulio", toDept: "produzione", type: "Ponte operativo",
        why: "Coordina il passaggio di schede tecniche e prototipi dallo Stile alla Produzione per il campionario" },
      { person: "Elisa", to: "Roberta", toDept: "comunicazione", type: "Doppio riporto",
        why: "Segreteria operativa: organizza shooting, gestisce logistica dei fornitori creativi" },
    ],
  },
  comunicazione: {
    summary: "Custode della voce del brand. Governa tutto ciÃ² che il brand dice, mostra e comunica: contenuti, immagini, tono, PR, piano editoriale, identitÃ  visiva.",
    hierarchy: [
      { name: "Roberta", role: "Communication Manager â€” Regia Editoriale & PR Strategy", level: 0,
        desc: "Piano editoriale, regia contenuti su tutti i canali, PR strategy, governance editoriale sito, contenuti ADV e newsletter, coordinamento creativi esterni, shooting, collaborazioni influencer. Invio contenuti editoriali a ufficio stampa e contatti press" },
      { name: "Marianna", role: "Social Media Operations", level: 1, reportsTo: "Roberta",
        desc: "Scheduling, publishing, community management, coordinamento content contributors, gestione asset library. Pubblica in autonomia tutto ciÃ² che Ã¨ nel calendario approvato" },
    ],
    externals: [
      { name: "Ornella", what: "Fotografia professionale" },
      { name: "Ilaria", what: "Video e formati video" },
      { name: "Gaetano", what: "Fotografia di prodotto" },
      { name: "HOON", what: "Content dalla Bottega" },
      { name: "Uff. Stampa MI", what: "PR execution e rassegna stampa" },
    ],
    crossLinks: [],
    intersections: [
      { area: "ADV", comms: "Contenuti creativi: visual, copy, format", digital: "Budget, targeting, piattaforme, performance, refresh" },
      { area: "Newsletter", comms: "Contenuti: testi, tono, layout editoriale", digital: "Klaviyo: automazioni, segmenti, deliverability, tech" },
      { area: "Sito", comms: "Content owner: pagine, copy, immagini, brand", digital: "Tech owner: backlog, release, performance, hosting" },
    ],
    openItems: [
      "Audit influencer e collaborazioni da parte di Roberta",
      "Ridefinizione strategica piano editoriale Instagram brand",
      "Definire output e scadenze chiare: giorno del mese per consegna ADV, comunicato stampa, ecc.",
    ],
  },
  digital: {
    summary: "Governa la presenza digitale del brand: e-commerce, CRM, sito web, dati, ADV e automazioni. Fabio e Caterina sono pari livello: nessuno dei due coordina l'altro.",
    hierarchy: [
      { name: "Fabio", role: "Digital Lead", level: 0,
        desc: "Responsabile unico infrastruttura digitale. Sito web (tech lead completo), connettore Notion/WooCommerce, migrazione CRM Mailchimp â†’ Klaviyo, governance campagne ADV Meta e Google (budget, targeting, performance, refresh), blog SEO, admin tech Notion" },
      { name: "Caterina Nobili", role: "E-commerce Manager & Owner B2C", level: 0, badge: "Owner cliente B2C",
        desc: "Owner relazione cliente B2C end-to-end. Caricamento prodotti sul sito e gestione estetica e-commerce (con Benedetta). Shopping experience Bottega (appuntamenti, accoglienza, follow-up). Press operations: gestione campioni, catalogo press dinamico, contatti stampa operativi, coordinamento spedizioni campioni (â†’ Simona â†’ Debora). Resi B2C. Magazzino sito. Community e clienteling" },
    ],
    crossLinks: [
      { person: "Fabio", to: "Roberta", toDept: "comunicazione", type: "Intersezione",
        why: "ADV (budget vs contenuti), Newsletter (Klaviyo vs copy), Sito (tech vs content). Escalation a Benedetta in caso di disaccordo" },
      { person: "Caterina", to: "Debora", toDept: "produzione", type: "Ponte operativo",
        why: "Preparazione e spedizione ordini B2C. Debora prepara pacchi, Valentina gestisce DDT e corriere" },
      { person: "Caterina", to: "Roberta", toDept: "comunicazione", type: "Coordinamento",
        why: "Coerenza brand sui contenuti press. Caterina gestisce operativitÃ  press, Roberta strategia PR/invio contenuti" },
      { person: "Caterina", to: "Simona", toDept: "admin", type: "Flusso press",
        why: "Spedizioni campioni press: Caterina decide cosa mandare â†’ Simona coordina â†’ Debora spedisce" },
    ],
    openItems: [
      "âš  PUNTO CRITICO: Caterina ha il carico piÃ¹ alto dell'organico. Serve una risorsa dedicata (stagista) per WhatsApp/SMS marketing e community management â€” attivitÃ  che oggi non vengono fatte ma genererebbero vendite",
    ],
  },
  admin: {
    summary: "Gestisce la parte finanziaria, contabile, gli acquisti e il canale wholesale B2B.",
    hierarchy: [
      { name: "Simona Gigliotti", role: "Resp. Amministrativo & Wholesale", level: 0,
        desc: "Supervisione amministrazione, contabilitÃ , servizi finanziari. Wholesale B2B, rapporti Bonini, pagamenti, solleciti, interfaccia commercialista. Backup: Alice (admin) + Giulio/Agostino (urgenze B2B)" },
      { name: "Alice", role: "Ufficio Acquisti", level: 0, badge: "Backup admin",
        desc: "Gestione fornitori, approvvigionamento, analisi dati acquisti, negoziazione, budget, ricerca nuovi fornitori. Elabora RdA ricevute da Giulio, le inserisce in Team System e gestisce fino a entrata magazzino. Backup operativo per Simona su parte amministrativa" },
      { name: "Valentina", role: "Segreteria Amministrativa & Logistica", level: 1, reportsTo: "Simona", note: "Part-time 09â€“13",
        desc: "DDT, pratiche corriere e prenotazioni spedizioni B2C. Recupero crediti (solo italiani). Chiamate corsi pelletteria. Gestione magazzino e-commerce. Gestione spedizioni e rientri campioni. Supporto amministrazione BB Comba (Coriolo). Allestimento e merchandising Bottega" },
    ],
    crossLinks: [
      { person: "Alice", to: "Giulio", toDept: "produzione", type: "Ponte operativo",
        why: "Giulio elabora fabbisogni e RdA, Alice le inserisce in Team System e gestisce fino a entrata magazzino" },
      { person: "Valentina", to: "Debora", toDept: "produzione", type: "Flusso DDT",
        why: "Debora prepara i pacchi, Valentina gestisce DDT e documenti di trasporto per spedizioni in uscita" },
    ],
  },
  produzione: {
    summary: "Il cuore produttivo e operativo: dalla programmazione al prodotto finito, inclusi qualitÃ , sarte, spedizioni, Bottega e gestione processi aziendali.",
    hierarchy: [
      { name: "Giulio", role: "Resp. Produzione & Operations", level: 0,
        desc: "Programmazione produzione, supervisione reparti produttivi, gestione risorse e obiettivi, monitoraggio fornitori esterni, flussi materiali, elaborazione RdA. NCR e resi B2B. Aggiornamento indicatori qualitÃ . Filtro HR (consulente lavoro). Strutturazione aziendale (avvocato, bandi). Backup urgenze B2B in assenza di Simona (non parte admin)" },
      { name: "Debora Antonini", role: "Resp. Controllo QualitÃ  & Spedizioni Uscita", level: 0,
        desc: "Controllo finale prodotti, rilevamento difetti, packaging. Preparazione fisica pacchi e spedizioni in uscita (B2C + B2B). Preparazione ordini B2B su indicazione Simona. Magazzino prodotto finito. Invio mail NCR e compilazione file NCR interne" },
      { name: "Ada", role: "Gestione Sarte & Lavorazioni Manuali", level: 0, note: "Ruolo autonomo",
        desc: "Si coordina direttamente con le sarte esterne e porta in azienda le lavorazioni da completare. Gestisce in autonomia la filiera di cucitura. Pianificazione kit per modello/variante di comune accordo con Giulio. Sviluppo campionario" },
      { name: "Federico Costantini", role: "Addetto alla Produzione", level: 1, reportsTo: "Giulio",
        desc: "Ricezione e smistamento materie prime, taglio materiali, lavorazione, assemblaggio, verifica meccanismi, completamento prodotto finito. PrioritÃ  ricevute esclusivamente da Giulio. Nei periodi di minor carico: manutenzione magazzino, ordine laboratorio, produzione modelli Bottega/Coriolo" },
      { name: "Laura Nocera", role: "Laboratorio & Ricezione Spedizioni", level: 1, reportsTo: "Giulio",
        desc: "Lavora in laboratorio (produzione). Analisi materie prime. Gestisce spedizioni in entrata (ricezione pacchi, consegna DDT ad Alice). Supporto magazzino materie prime. Non gestisce spedizioni in uscita. Lavorazioni accessori (clip, ecc.) nei momenti di minor carico" },
      { name: "Laura Pontuale", role: "Supporto Gestione Sarte & QC", level: 1, reportsTo: "Debora + Ada",
        desc: "Controllo conformitÃ  in entrata, interfaccia kit sarte, riparazione difetti cucitura, pulizia e preparazione prodotti, supporto spedizioni, supporto Stile in fase campionario. Ripristino resi: gestisce file resi (registra arrivo, tipo difetto, data riparazione), ripara e comunica completamento a Giulio" },
    ],
    crossLinks: [
      { person: "Debora", to: "Simona", toDept: "admin", type: "Ponte operativo",
        why: "Coordinamento per la gestione ordini B2B, spedizioni clienti wholesale e magazzino prodotto finito" },
      { person: "Debora", to: "Caterina", toDept: "digital", type: "Ponte operativo",
        why: "Preparazione e spedizione ordini B2C. Debora prepara i pacchi, Valentina gestisce DDT e corriere" },
      { person: "Giulio", to: "Alice", toDept: "admin", type: "Flusso RdA",
        why: "Giulio elabora fabbisogni e RdA, Alice le inserisce in Team System e gestisce fino a entrata magazzino" },
    ],
    notes: [
      "Agostino interviene direttamente in laboratorio per risolvere problemi operativi",
      "Resi B2C e B2B: file condivisi separati. Laura Pontuale: minimo 1h/giorno dedicata a riparazioni resi â€” per B2C Ã¨ fattore strategico, per B2B entro ~35 giorni",
      "Magazzino: Stile ha magazzino separato (campioni inclusi). Magazzino Produzione sotto supervisione Giulio con supporto Laura N. e Federico",
      "Federico: nei periodi di minor carico (~aprile, fine settembre) supporta manutenzione magazzino, ordine laboratorio, produzione Bottega/Coriolo",
      "Bottega/Store: area operativa separata dallo Stile. Produzione Bottega sotto Giulio con Laura Nocera e Federico",
    ],
  },
};

const font = "'Cormorant Garamond', Georgia, serif";
const deptOrder = ["stile", "comunicazione", "digital", "admin", "produzione"];

function MacroChart({ selectedDept, onSelect }) {
  const W = 1000, dirY = 55, splitY = 105, deptY = 195;
  const boxW = 148, boxH = 76;
  const deptX = { stile: 130, comunicazione: 320, digital: 500, admin: 680, produzione: 870 };
  const benX = 225, agoX = 775;
  const benDepts = ["stile", "comunicazione"];
  const agoDepts = ["admin", "produzione"];

  const linkedDepts = new Set();
  if (selectedDept) {
    linkedDepts.add(selectedDept);
    DEPT_LINKS.forEach(l => {
      if (l.from === selectedDept) linkedDepts.add(l.to);
      if (l.to === selectedDept) linkedDepts.add(l.from);
    });
  }

  return (
    <svg viewBox={`0 0 ${W} 340`} style={{ width: "100%", maxWidth: W, display: "block", margin: "0 auto" }}>
      <rect x={30} y={25} width={440} height={115} rx={8} fill="#F4F2EE" opacity={0.5} />
      <text x={44} y={42} fill="#B0A898" fontSize={7} letterSpacing="0.16em" fontWeight={500} style={{ fontFamily: font }}>AREA BENEDETTA</text>
      <rect x={530} y={25} width={440} height={115} rx={8} fill="#F4F2EE" opacity={0.5} />
      <text x={544} y={42} fill="#B0A898" fontSize={7} letterSpacing="0.16em" fontWeight={500} style={{ fontFamily: font }}>AREA AGOSTINO</text>
      <rect x={430} y={25} width={140} height={115} rx={0} fill="#EAF0EA" opacity={0.25} />

      <rect x={benX - 90} y={dirY - 24} width={180} height={48} rx={5} fill="#1A1A18" />
      <text x={benX} y={dirY - 4} textAnchor="middle" fill="#FAFAF6" fontSize={15} fontWeight={500} style={{ fontFamily: font }} letterSpacing="0.03em">Benedetta</text>
      <text x={benX} y={dirY + 11} textAnchor="middle" fill="#A09888" fontSize={8} style={{ fontFamily: font }} letterSpacing="0.08em">Direzione Creativa Â· Comunicazione</text>

      <rect x={agoX - 90} y={dirY - 24} width={180} height={48} rx={5} fill="#1A1A18" />
      <text x={agoX} y={dirY - 4} textAnchor="middle" fill="#FAFAF6" fontSize={15} fontWeight={500} style={{ fontFamily: font }} letterSpacing="0.03em">Agostino</text>
      <text x={agoX} y={dirY + 11} textAnchor="middle" fill="#A09888" fontSize={8} style={{ fontFamily: font }} letterSpacing="0.08em">CEO Â· Finanza Â· Produzione</text>

      <line x1={benX} y1={dirY + 24} x2={benX} y2={splitY} stroke="#A09888" strokeWidth={1} opacity={0.3} />
      {benDepts.map(id => <path key={`b-${id}`} d={`M${benX},${splitY} L${deptX[id]},${splitY} L${deptX[id]},${deptY - boxH / 2}`} fill="none" stroke={DEPTS[id].color} strokeWidth={1.2} opacity={0.3} />)}
      <line x1={agoX} y1={dirY + 24} x2={agoX} y2={splitY} stroke="#A09888" strokeWidth={1} opacity={0.3} />
      {agoDepts.map(id => <path key={`a-${id}`} d={`M${agoX},${splitY} L${deptX[id]},${splitY} L${deptX[id]},${deptY - boxH / 2}`} fill="none" stroke={DEPTS[id].color} strokeWidth={1.2} opacity={0.3} />)}
      <path d={`M${benX},${splitY} L${deptX.digital},${splitY} L${deptX.digital},${deptY - boxH / 2}`} fill="none" stroke={DEPTS.digital.color} strokeWidth={0.8} opacity={0.2} strokeDasharray="5,3" />
      <path d={`M${agoX},${splitY} L${deptX.digital},${splitY}`} fill="none" stroke={DEPTS.digital.color} strokeWidth={0.8} opacity={0.2} strokeDasharray="5,3" />

      {deptOrder.map((id) => {
        const d = DEPTS[id], x = deptX[id], isSel = selectedDept === id;
        const isLinked = linkedDepts.size > 0 ? linkedDepts.has(id) : true;
        const data = PEOPLE[id], count = data.hierarchy.length;
        return (
          <g key={id} onClick={() => onSelect(isSel ? null : id)} style={{ cursor: "pointer" }}>
            {isSel && <rect x={x - boxW / 2 + 2} y={deptY - boxH / 2 + 2} width={boxW} height={boxH} rx={7} fill="rgba(0,0,0,0.04)" />}
            <rect x={x - boxW / 2} y={deptY - boxH / 2} width={boxW} height={boxH} rx={7} fill={isSel ? d.light : "#FFFFFF"} stroke={isSel ? d.color : isLinked ? `${d.color}50` : `${d.color}18`} strokeWidth={isSel ? 2.5 : 1} opacity={isLinked ? 1 : 0.5} style={{ transition: "all 0.25s" }} />
            <rect x={x - boxW / 2} y={deptY - boxH / 2} width={boxW} height={5} rx={0} fill={d.color} opacity={isLinked ? 1 : 0.3} style={{ transition: "opacity 0.25s" }} />
            <text x={x} y={deptY - 10} textAnchor="middle" fill="#1A1A18" fontSize={11.5} fontWeight={600} style={{ fontFamily: font }} opacity={isLinked ? 1 : 0.5}>{d.label}</text>
            <text x={x} y={deptY + 4} textAnchor="middle" fill={d.color} fontSize={8} style={{ fontFamily: font }} opacity={isLinked ? 0.7 : 0.3} letterSpacing="0.04em">{count} persone{data.externals ? ` + ${data.externals.length} esterni` : ""}</text>
            <text x={x} y={deptY + 16} textAnchor="middle" fill="#A09888" fontSize={7.5} style={{ fontFamily: font }} opacity={isLinked ? 0.6 : 0.25} letterSpacing="0.04em">â†’ {d.reportTo}</text>
            <text x={x} y={deptY + boxH / 2 - 6} textAnchor="middle" fill={d.color} fontSize={7.5} style={{ fontFamily: font }} opacity={0.4}>{isSel ? "â–² chiudi dettaglio" : "â–¼ apri dettaglio"}</text>
          </g>
        );
      })}

      {DEPT_LINKS.map((link, i) => {
        const x1 = deptX[link.from], x2 = deptX[link.to];
        const baseY = deptY + boxH / 2 + 4, arcDepth = 14 + i * 10, arcY = baseY + arcDepth;
        const midX = (x1 + x2) / 2;
        const isHi = selectedDept ? (selectedDept === link.from || selectedDept === link.to) : false;
        return (
          <g key={`arc-${i}`}>
            <path d={`M${x1},${baseY} C${x1},${arcY} ${x2},${arcY} ${x2},${baseY}`} fill="none" stroke={isHi ? "#1A1A18" : "#B8B0A0"} strokeWidth={isHi ? 2 : 1} strokeDasharray="7,4" opacity={isHi ? 0.5 : 0.18} style={{ transition: "all 0.3s" }} />
            <text x={midX} y={arcY - 4} textAnchor="middle" fill={isHi ? "#1A1A18" : "#A09888"} fontSize={isHi ? 8 : 7} fontWeight={isHi ? 600 : 400} style={{ fontFamily: font, transition: "all 0.3s" }} opacity={isHi ? 0.85 : 0.4} letterSpacing="0.02em">{link.label}</text>
          </g>
        );
      })}

      <text x={16} y={dirY + 2} fill="#D0C8B8" fontSize={7} letterSpacing="0.14em" style={{ fontFamily: font }}>DIREZIONE</text>
      <text x={16} y={deptY + 2} fill="#D0C8B8" fontSize={7} letterSpacing="0.14em" style={{ fontFamily: font }}>REPARTI</text>
    </svg>
  );
}

function DeptDetail({ deptId, onClose }) {
  const dept = DEPTS[deptId], data = PEOPLE[deptId];
  return (
    <div style={{ maxWidth: 740, margin: "2px auto 24px", background: "#FFF", border: `1px solid ${dept.color}18`, borderTop: `4px solid ${dept.color}`, borderRadius: "0 0 8px 8px", boxShadow: "0 4px 20px rgba(0,0,0,0.04)" }}>
      <div style={{ padding: "18px 24px", background: `linear-gradient(145deg, ${dept.light}80, #FFFFFF)`, borderBottom: `1px solid ${dept.color}0C`, display: "flex", alignItems: "center", gap: 14 }}>
        <div style={{ width: 44, height: 44, borderRadius: 10, background: dept.color, display: "flex", alignItems: "center", justifyContent: "center", color: "#FFF", fontSize: 18, fontWeight: 300, fontFamily: font }}>{data.hierarchy.length}</div>
        <div style={{ flex: 1 }}>
          <div style={{ fontSize: 19, fontWeight: 600, fontFamily: font, letterSpacing: "0.02em" }}>{dept.label}</div>
          <div style={{ fontSize: 10, color: "#A09888", fontFamily: font, marginTop: 2 }}>Riporta a <strong style={{ color: "#5A5848" }}>{dept.reportTo}</strong></div>
          <div style={{ fontSize: 11, color: "#6A6858", fontFamily: font, marginTop: 4, lineHeight: 1.5 }}>{data.summary}</div>
        </div>
        <button onClick={onClose} style={{ background: "none", border: `1px solid ${dept.color}25`, padding: "5px 14px", fontSize: 10, color: dept.color, cursor: "pointer", fontFamily: font, borderRadius: 5, alignSelf: "flex-start" }}>âœ• Chiudi</button>
      </div>

      <div style={{ padding: "16px 24px 8px" }}>
        <div style={{ fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 12, fontWeight: 500, fontFamily: font }}>Chi lavora qui</div>
        {data.hierarchy.map((p, i) => (
          <div key={i} style={{ display: "flex", alignItems: "flex-start", gap: 12, padding: "12px 0", borderBottom: i < data.hierarchy.length - 1 ? "1px solid #F2EEEA" : "none", marginLeft: p.level * 28 }}>
            <div style={{ width: 26, height: 26, borderRadius: 13, flexShrink: 0, background: p.level === 0 ? dept.color : dept.light, border: p.level === 0 ? "none" : `1.5px solid ${dept.color}30`, color: p.level === 0 ? "#FFF" : dept.color, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 10, fontWeight: 600, fontFamily: font, marginTop: 1 }}>{p.name.charAt(0)}</div>
            <div style={{ flex: 1 }}>
              <div style={{ display: "flex", alignItems: "center", gap: 6, flexWrap: "wrap" }}>
                <span style={{ fontSize: 14, fontWeight: 600, fontFamily: font }}>{p.name}</span>
                {p.badge && <span style={{ fontSize: 7.5, letterSpacing: "0.05em", textTransform: "uppercase", color: "#B07030", background: "#B0703010", padding: "2px 8px", fontWeight: 600, fontFamily: font, borderRadius: 3 }}>{p.badge}</span>}
                {p.note && <span style={{ fontSize: 7.5, color: "#5080A0", background: "#5080A008", padding: "2px 8px", fontFamily: font, borderRadius: 3 }}>{p.note}</span>}
              </div>
              <div style={{ fontSize: 10, color: dept.color, fontFamily: font, letterSpacing: "0.04em", marginTop: 2 }}>{p.role}</div>
              {p.reportsTo && <div style={{ fontSize: 9, color: "#A09888", fontFamily: font, marginTop: 2, letterSpacing: "0.02em" }}>â†’ Riporta a <strong>{p.reportsTo}</strong></div>}
              <div style={{ fontSize: 11, color: "#4A4840", fontFamily: font, marginTop: 5, lineHeight: 1.65 }}>{p.desc}</div>
            </div>
          </div>
        ))}
      </div>

      {data.crossLinks && data.crossLinks.length > 0 && (
        <div style={{ padding: "4px 24px 16px" }}>
          <div style={{ fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" }}>Connessioni con altri reparti</div>
          {data.crossLinks.map((link, i) => {
            const td = DEPTS[link.toDept];
            return (
              <div key={i} style={{ padding: "12px 16px", marginBottom: 8, background: `${td.light}60`, border: `1px solid ${td.color}10`, borderLeft: `4px solid ${td.color}50`, borderRadius: 5 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 8, flexWrap: "wrap", marginBottom: 5 }}>
                  <span style={{ display: "inline-flex", alignItems: "center", gap: 4, padding: "2px 10px", background: "#FFF", border: `1px solid ${dept.color}20`, borderRadius: 12, fontSize: 11, fontWeight: 600, fontFamily: font }}><span style={{ width: 6, height: 6, borderRadius: 3, background: dept.color }} />{link.person}</span>
                  <span style={{ fontSize: 14, color: "#C0B8A8", lineHeight: 1 }}>âŸ¶</span>
                  <span style={{ display: "inline-flex", alignItems: "center", gap: 4, padding: "2px 10px", background: "#FFF", border: `1px solid ${td.color}20`, borderRadius: 12, fontSize: 11, fontWeight: 600, fontFamily: font }}><span style={{ width: 6, height: 6, borderRadius: 3, background: td.color }} />{link.to}</span>
                  <span style={{ fontSize: 7.5, letterSpacing: "0.05em", textTransform: "uppercase", color: td.color, fontWeight: 500, fontFamily: font }}>{link.type}</span>
                </div>
                <div style={{ fontSize: 11, color: "#4A4840", lineHeight: 1.6, fontFamily: font }}>{link.why}</div>
              </div>
            );
          })}
        </div>
      )}

      {data.intersections && (
        <div style={{ padding: "4px 24px 16px" }}>
          <div style={{ fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" }}>Intersezioni con Digital (aree condivise)</div>
          <div style={{ border: "1px solid #E4E0D8", borderRadius: 6, overflow: "hidden" }}>
            <div style={{ display: "grid", gridTemplateColumns: "100px 1fr 1fr", background: "#FAFAF6", borderBottom: "1px solid #E4E0D8" }}>
              <div style={{ padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: "#888" }}>Area</div>
              <div style={{ padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: dept.color }}>Comunicazione</div>
              <div style={{ padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: DEPTS.digital.color }}>Digital</div>
            </div>
            {data.intersections.map((row, i) => (
              <div key={i} style={{ display: "grid", gridTemplateColumns: "100px 1fr 1fr", borderBottom: i < data.intersections.length - 1 ? "1px solid #F0ECE4" : "none" }}>
                <div style={{ padding: "10px 12px", fontSize: 11, fontWeight: 600, fontFamily: font }}>{row.area}</div>
                <div style={{ padding: "10px 12px", fontSize: 10.5, fontFamily: font, color: "#4A4840", lineHeight: 1.5 }}>{row.comms}</div>
                <div style={{ padding: "10px 12px", fontSize: 10.5, fontFamily: font, color: "#4A4840", lineHeight: 1.5 }}>{row.digital}</div>
              </div>
            ))}
          </div>
          <div style={{ fontSize: 10, color: "#8A8878", fontStyle: "italic", fontFamily: font, marginTop: 8 }}>Regola: se Fabio e Roberta non trovano un accordo, la decisione sale a Benedetta.</div>
        </div>
      )}

      {data.externals && (
        <div style={{ padding: "4px 24px 18px" }}>
          <div style={{ fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" }}>Collaboratori esterni ({data.externals.length})</div>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))", gap: 8 }}>
            {data.externals.map((ext, i) => (
              <div key={i} style={{ padding: "10px 14px", background: dept.light, border: `1px solid ${dept.color}0C`, borderRadius: 5 }}>
                <div style={{ fontSize: 11.5, fontWeight: 600, fontFamily: font }}>{ext.name}</div>
                <div style={{ fontSize: 9.5, color: "#6A6858", fontFamily: font, marginTop: 2 }}>{ext.what}</div>
              </div>
            ))}
          </div>
        </div>
      )}

      {data.openItems && data.openItems.length > 0 && (
        <div style={{ padding: "4px 24px 16px" }}>
          {data.openItems.map((item, i) => (
            <div key={i} style={{ padding: "10px 14px", background: item.startsWith("âš ") ? "#FFF0F0" : "#FFF8E8", borderLeft: `3px solid ${item.startsWith("âš ") ? "#D04040" : "#E0A030"}`, borderRadius: 3, fontSize: 11, color: item.startsWith("âš ") ? "#8A2020" : "#8A6A20", fontStyle: "italic", lineHeight: 1.65, fontFamily: font, marginBottom: 6, display: "flex", alignItems: "flex-start", gap: 8 }}>
              {!item.startsWith("âš ") && <span style={{ fontSize: 14, flexShrink: 0 }}>ðŸ“‹</span>}{item.startsWith("âš ") ? item : item}
            </div>
          ))}
        </div>
      )}

      {data.notes && (
        <div style={{ padding: "4px 24px 16px" }}>
          {data.notes.map((n, i) => (
            <div key={i} style={{ padding: "10px 14px", background: `${dept.color}05`, borderLeft: `3px solid ${dept.color}25`, borderRadius: 3, fontSize: 11, color: "#5A5850", fontStyle: "italic", lineHeight: 1.65, fontFamily: font, marginBottom: 6 }}>{n}</div>
          ))}
        </div>
      )}
    </div>
  );
}

function Organigramma() {
  const [sel, setSel] = useState(null);
  return (
    <div style={{ fontFamily: font, background: "#F8F7F4", minHeight: "100vh", color: "#1A1A18" }}>
      <header style={{ textAlign: "center", padding: "36px 20px 14px" }}>
        <div style={{ fontSize: 10, letterSpacing: "0.45em", textTransform: "uppercase", color: "#A09888" }}>Organigramma</div>
        <h1 style={{ fontSize: 30, fontWeight: 300, letterSpacing: "0.1em", margin: "4px 0" }}>Benedetta Bruzziches</h1>
        <div style={{ fontSize: 10, letterSpacing: "0.22em", color: "#B0A898", textTransform: "uppercase" }}>Febbraio 2026 Â· Rev 5</div>
        <div style={{ display: "flex", justifyContent: "center", gap: 14, marginTop: 12, flexWrap: "wrap" }}>
          {["16 persone interne", "5 collaboratori esterni", "6 aree operative"].map((s, i) => (
            <span key={i} style={{ fontSize: 10, color: "#7A7868", background: "#EFEDE8", padding: "4px 12px", borderRadius: 3 }}>{s}</span>
          ))}
        </div>
        <div style={{ marginTop: 14, fontSize: 11, color: "#8A8878", lineHeight: 1.7, maxWidth: 600, margin: "14px auto 0" }}>
          <strong>Linee continue</strong> = gerarchia. <strong style={{ marginLeft: 6 }}>Archi tratteggiati</strong> = collaborazioni operative tra reparti.
          <br />Clicca su un reparto per esplorare chi ci lavora e le connessioni.
        </div>
      </header>
      <div style={{ padding: "0 12px" }}><MacroChart selectedDept={sel} onSelect={setSel} /></div>
      {sel && <div style={{ padding: "0 16px" }}><DeptDetail deptId={sel} onClose={() => setSel(null)} /></div>}
      <div style={{ maxWidth: 740, margin: "0 auto", padding: "10px 20px 6px", display: "flex", flexWrap: "wrap", gap: 14, justifyContent: "center", fontSize: 9.5, color: "#8A8878" }}>
        {Object.entries(DEPTS).map(([id, d]) => (
          <span key={id} style={{ display: "inline-flex", alignItems: "center", gap: 5 }}><span style={{ width: 9, height: 9, borderRadius: 2, background: d.color, display: "inline-block" }} />{d.label}</span>
        ))}
      </div>
      <div style={{ textAlign: "center", padding: "6px 0 32px", fontSize: 8.5, letterSpacing: "0.18em", color: "#C8C0B0", textTransform: "uppercase" }}>Â© Benedetta Bruzziches Â· Documento interno Â· Rev 5 Â· 25 febbraio 2026</div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<Organigramma />);
</script>
</body>
</html>
