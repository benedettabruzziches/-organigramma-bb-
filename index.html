<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organigramma â€” Benedetta Bruzziches</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #F8F7F4; font-family: 'Cormorant Garamond', Georgia, serif; color: #1A1A18; }
  button { font-family: inherit; }
</style>
</head>
<body>
<div id="root"></div>
<script type="module">
import React from "https://esm.sh/react@18.2.0";
import ReactDOM from "https://esm.sh/react-dom@18.2.0/client";
const { useState, createElement: h } = React;

const DEPTS = {
  stile:         { label: "Ufficio Stile",         color: "#8B6F4F", light: "#F7F0E8", dark: "#6B5030", reportTo: "Benedetta", side: "left" },
  comunicazione: { label: "Comunicazione",         color: "#4A6A8B", light: "#E8EFF7", dark: "#2A4A6B", reportTo: "Benedetta", side: "left" },
  digital:       { label: "Digital & E-commerce",  color: "#4A7A50", light: "#E8F4EA", dark: "#2A5A30", reportTo: "Benedetta + Agostino", side: "center" },
  admin:         { label: "Amministrazione & B2B", color: "#8B4A5E", light: "#F7E8EE", dark: "#6B2A3E", reportTo: "Agostino", side: "right" },
  produzione:    { label: "Produzione & Operations", color: "#5E4A8B", light: "#EFE8F7", dark: "#3E2A6B", reportTo: "Agostino", side: "right" },
};

const DEPT_LINKS = [
  { from: "stile",      to: "produzione",    label: "Campionario e schede tecniche" },
  { from: "stile",      to: "comunicazione", label: "Supporto operativo shooting" },
  { from: "digital",    to: "comunicazione", label: "ADV \u00B7 Newsletter \u00B7 Sito" },
  { from: "admin",      to: "produzione",    label: "Materiali + Ordini B2B" },
  { from: "produzione", to: "digital",       label: "Spedizioni B2C + Stock" },
  { from: "digital",    to: "admin",         label: "DDT \u00B7 Corrieri \u00B7 Press" },
];

const PEOPLE = {
  stile: {
    summary: "Cuore creativo del brand. Sviluppa l\u2019identit\u00E0 estetica di ogni collezione: modelli, materiali, colori, accessori metallici.",
    hierarchy: [
      { name: "Claudia", role: "Creative Lead", level: 0, desc: "Guida il cuore estetico del brand. Benedetta definisce la visione creativa e le direzioni macro, Claudia la traduce in ricerca, concept e sviluppo operativo quotidiano. Ricerca estetica: tendenze, materiali, ispirazioni, moodboard. Sviluppo concept di collezione. Supervisione sviluppo di ogni modello: proporzioni, materiali, colori, dettagli costruttivi. Propone palette colori, materiali, finiture per ogni stagione. Coordina Elisa nel lavoro quotidiano. Supervisiona Domitilla per accessori metallici (chiusure, ferramenti). Prepara presentazione collezioni per la Direzione. La validazione finale su ogni modello che passa in produzione \u00E8 di Benedetta" },
      { name: "Elisa", role: "Operations & Production Coord.", level: 0, badge: "Doppio ruolo",
        desc: "Ponte operativo tra Stile e resto dell\u2019azienda. Coordina fornitori e laboratori per sviluppo prodotto. Compila e aggiorna schede tecniche, gestisce passaggio prototipi a Produzione (Giulio). Supervisiona campionari e timing campionari. Gestisce magazzino materiali e campioni Stile (separato da Produzione e e-commerce). Cataloga materiali e aggiorna database Notion per area Stile. Segreteria operativa per Comunicazione: organizza shooting (data, location, creativi, materiali), gestisce logistica fornitori creativi (Ornella, Ilaria, HOON). Supporto diretto a Benedetta su task operative nei momenti di minor carico. Ruolo principale nello Stile: in caso di conflitto di priorit\u00E0 Stile/Comunicazione/Direzione, si confronta con Benedetta" },
    ],
    externals: [
      { name: "Domitilla", what: "Design e progettazione accessori metallici (chiusure, ferramenti), ricerca materiali e fornitori accessori, coordinamento con fornitori per prototipi e sviluppo. Riporta a Claudia + Benedetta" },
    ],
    crossLinks: [
      { person: "Elisa", to: "Giulio", toDept: "produzione", type: "Ponte operativo", why: "Coordina il passaggio di schede tecniche e prototipi dallo Stile alla Produzione per il campionario" },
      { person: "Elisa", to: "Roberta", toDept: "comunicazione", type: "Doppio riporto", why: "Segreteria operativa: organizza shooting, gestisce logistica dei fornitori creativi. In caso di conflitto Stile/Comunicazione, si confronta con Benedetta" },
    ],
  },
  comunicazione: {
    summary: "Custode della voce del brand. Governa tutto ci\u00F2 che il brand dice, mostra e comunica al mondo: contenuti, immagini, tono, relazioni con la stampa, piano editoriale, identit\u00E0 visiva. La direzione strategica viene da Benedetta; Roberta la traduce in esecuzione su tutti i canali.",
    hierarchy: [
      { name: "Roberta", role: "Communication Manager \u2014 Regia Editoriale & PR Strategy", level: 0, desc: "Piano editoriale su tutti i canali (temi, formati, frequenza). Regia contenuti e approvazione pre-pubblicazione. PR strategy, relazioni stampa, coordinamento ufficio stampa Milano, rassegna stampa, inviti, press day, seeding. Direzione collaborazioni influencer e talent (selezione, negoziazione, brief, calendario). Regia shooting fotografici e video con creativi esterni. Produzione contenuti creativi per ADV e newsletter (visual, copy, format). Governance editoriale del sito (pagine, copy, immagini, coerenza brand). Custode operativa del tono di voce del brand" },
      { name: "Marianna", role: "Social Media Operations", level: 1, reportsTo: "Roberta", desc: "Scheduling, publishing, community management (IG, DM, commenti), coordinamento content contributors (HOON dalla Bottega), gestione asset library. Opera sotto regia di Roberta. Pubblica in autonomia tutto ci\u00F2 che \u00E8 nel calendario approvato. Roberta interviene solo su contenuti sensibili o fuori piano" },
    ],
    externals: [
      { name: "Ornella", what: "Fotografia professionale" },
      { name: "Ilaria", what: "Video e formati video" },
      { name: "Gaetano", what: "Fotografia di prodotto" },
      { name: "HOON", what: "Content dalla Bottega" },
      { name: "Uff. Stampa MI", what: "PR execution e rassegna stampa" },
    ],
    crossLinks: [],
    intersections: [
      { area: "ADV", comms: "Produce contenuti creativi: visual, copy, format. Propone concept alla Direzione", digital: "Governa budget, targeting, piattaforme, performance, refresh. Porta dati alla Direzione" },
      { area: "Newsletter", comms: "Produce contenuti: testi, tono, layout editoriale. Propone piano newsletter alla Direzione", digital: "Governa Klaviyo: automazioni, segmenti, deliverability, tech. Porta dati aperture e conversioni" },
      { area: "Sito", comms: "Content owner: pagine editoriali, copy, immagini, coerenza brand. Governance editoriale", digital: "Tech owner: backlog, release, performance, hosting, connettore. Governance tecnica" },
    ],
    notInScope: [
      "Infrastruttura tecnica del sito (backlog, release, hosting, performance) \u2192 Digital Lead (Fabio)",
      "Piattaforma CRM / Klaviyo (configurazione, automazioni, deliverability, segmenti) \u2192 Digital Lead (Fabio)",
      "Budget e performance campagne ADV (targeting, ROAS, ottimizzazione, piattaforme) \u2192 Digital Lead (Fabio)",
      "Relazione cliente B2C (vendite, resi, riparazioni, community, WhatsApp) \u2192 E-commerce Manager (Caterina)",
      "Gestione richieste press e campioni (ricezione, spedizione, tracking, rientri) \u2192 E-commerce Manager (Caterina)",
    ],
    openItems: [
      "Audit influencer e collaborazioni da parte di Roberta: definire processo, budget, criteri di selezione e calendario",
      "Ridefinizione strategica piano editoriale Instagram brand",
      "Definire output e scadenze chiare: giorno del mese per consegna ADV, comunicato stampa, ecc.",
    ],
  },
  digital: {
    summary: "Governa la presenza digitale del brand: e-commerce, CRM, sito web, dati, ADV e automazioni. Fabio e Caterina sono pari livello con ownership distinte: nessuno dei due coordina l\u2019altro. Fabio governa l\u2019infrastruttura e i canali digitali, Caterina governa la relazione con il cliente finale.",
    hierarchy: [
      { name: "Fabio", role: "Digital Lead", level: 0, desc: "Responsabile unico infrastruttura digitale. Sito web: tech lead completo (backlog, release, QA, performance, hosting, integrazioni). Connettore Notion/WooCommerce: sviluppo e manutenzione ponte dati tra database Notion e WooCommerce, mappatura campi 1:1, sincronizzazione, troubleshooting. Migrazione CRM Mailchimp \u2192 Klaviyo: setup, import contatti da 6 fonti, automazioni, segmenti, deliverability, integrazione sito e Notion. Governance campagne ADV Meta e Google: budget, targeting, ROAS, ottimizzazione, ciclo refresh strutturato. Blog SEO e CMS. Admin tech Notion: governance workspace, troubleshooting, supporto adozione strumenti digitali e Claude AI per il team. Coordina eventuali risorse esterne (sviluppatori, consulenti). Traduce la direzione strategica in progetti digitali con timeline, indicatori e risultati misurabili" },
      { name: "Caterina Nobili", role: "E-commerce Manager & Owner B2C", level: 0, badge: "Owner cliente B2C", desc: "Owner relazione cliente B2C end-to-end: dalla scoperta all\u2019acquisto al post-vendita. Vendite online e gestione ordini WooCommerce (inserimento Notion, passaggio a Debora per pacco, Valentina per DDT/corriere, invio tracking, chiusura). Shopping experience Bottega: appuntamenti Calendly, accoglienza, tour, personalizzazione, chiusura, follow-up entro 24h, note post-visita. Press operations: gestione autonoma press@benedettabruzziches.com, preparazione campioni, spedizione con tracking, rientri, solleciti, catalogo press dinamico su Notion, rubrica contatti stampa. Riparazioni: repair@benedettabruzziches.com, valutazione garanzia/pagamento, preventivo, passaggio a Giulio, tracking, rientro al cliente. Resi B2C, magazzino sito e-commerce. WhatsApp/SMS marketing. Community mobile e clienteling: lista VIP, early access, inviti, cura rapporto personale" },
    ],
    crossLinks: [
      { person: "Fabio", to: "Roberta", toDept: "comunicazione", type: "Intersezione", why: "ADV (budget vs contenuti), Newsletter (Klaviyo vs copy), Sito (tech vs content). Ownership separate, allineamento operativo. Escalation a Benedetta in caso di disaccordo" },
      { person: "Caterina", to: "Debora", toDept: "produzione", type: "Ponte operativo", why: "Preparazione e spedizione ordini B2C. Caterina passa ordini, Debora prepara pacchi fisici. Valentina gestisce DDT e corriere" },
      { person: "Caterina", to: "Roberta", toDept: "comunicazione", type: "Coordinamento", why: "Coerenza brand sui contenuti press. Caterina gestisce operativit\u00E0 press (campioni, spedizioni, rientri), Roberta gestisce strategia PR e contenuti editoriali" },
      { person: "Caterina", to: "Simona", toDept: "admin", type: "Flusso press", why: "DDT, corrieri, stock magazzino. Valentina gestisce DDT, prenotazioni corriere, pratiche spedizione. Simona supervisiona amministrazione" },
      { person: "Caterina", to: "Giulio", toDept: "produzione", type: "Riparazioni", why: "Caterina riceve richiesta riparazione, valuta e passa a Giulio che assegna internamente. Caterina gestisce comunicazione con il cliente" },
    ],
    openItems: ["\u26A0 PUNTO CRITICO: Caterina ha il carico pi\u00F9 alto dell\u2019organico. Serve una risorsa dedicata (stagista) per WhatsApp/SMS marketing e community management \u2014 attivit\u00E0 che oggi non vengono fatte ma genererebbero vendite"],
  },
  admin: {
    summary: "Gestisce la parte finanziaria, contabile, gli acquisti, il canale wholesale B2B e la logistica campioni press. Simona coordina Alice e Valentina nell\u2019operativit\u00E0 quotidiana.",
    hierarchy: [
      { name: "Simona Gigliotti", role: "Resp. Amministrativo & Wholesale", level: 0, desc: "Responsabile area amministrativa e canale wholesale B2B. Supervisione contabilit\u00E0 generale, prima nota, scadenzario, fatturazione attiva e passiva, adempimenti fiscali e tributari. Interfaccia commercialista e consulenti finanziari. Wholesale B2B: ordini, conferme d\u2019ordine, spedizioni B2B, pagamenti, solleciti, recupero crediti. Rapporti agente Bonini. Gestione rapporti bancari, fidi, anticipi fatture, pagamenti fornitori, cash flow operativo. Coordinamento logistico spedizioni campioni press su richiesta di Caterina. Coordina Alice e Valentina nell\u2019operativit\u00E0 quotidiana. Backup: Alice (admin) + Giulio/Agostino (urgenze B2B)" },
      { name: "Alice", role: "Ufficio Acquisti", level: 0, badge: "Backup admin", desc: "Gestisce l\u2019intero ciclo acquisti: dalla ricezione delle RdA elaborate da Giulio fino a entrata in magazzino. Gestione fornitori: rapporti, negoziazione prezzi e condizioni, valutazione performance, ricerca nuovi fornitori. Approvvigionamento: ricezione RdA da Giulio, inserimento in Team System, gestione ordini, monitoraggio tempi di consegna. Analisi dati acquisti, controllo budget materiali, reportistica per Direzione. Backup operativo amministrativo per Simona: supporto su contabilit\u00E0 e pratiche amministrative (attivo strutturalmente, non solo in emergenza)" },
      { name: "Valentina", role: "Segreteria Amministrativa & Logistica", level: 1, reportsTo: "Simona", note: "Part-time 09\u201313", desc: "Profilo operativo e trasversale che tocca e-commerce, press, Bottega e Coriolo. DDT e spedizioni B2C: gestione DDT in uscita, prenotazioni corriere, pratiche spedizione. Recupero crediti su clienti italiani. Chiamate corsi pelletteria. Gestione magazzino e-commerce: stock fisico prodotti per il sito, monitoraggio disponibilit\u00E0, aggiornamento stock, segnalazione esaurimenti a Caterina e Fabio. Gestione spedizioni e rientri campioni press (su coordinamento Simona), monitoraggio e comunicazione stato rientri a Caterina. Supporto amministrativo BB Comba (Coriolo). Allestimento e merchandising Bottega. Conferma appuntamenti Bottega il giorno prima via WhatsApp personalizzato per Caterina (in sua assenza pomeridiana: Caterina conferma)" },
    ],
    crossLinks: [
      { person: "Alice", to: "Giulio", toDept: "produzione", type: "Ponte operativo", why: "Giulio elabora fabbisogni e RdA, Alice le inserisce in Team System e gestisce fino a entrata magazzino" },
      { person: "Alice", to: "Laura Nocera", toDept: "produzione", type: "Ricezione DDT", why: "Laura Nocera riceve pacchi in entrata e consegna DDT ad Alice per registrazione" },
      { person: "Valentina", to: "Debora", toDept: "produzione", type: "Flusso DDT", why: "Debora prepara i pacchi, Valentina gestisce DDT e documenti di trasporto per spedizioni in uscita" },
      { person: "Valentina", to: "Caterina", toDept: "digital", type: "Flusso operativo", why: "DDT e corrieri B2C. Magazzino e-commerce. Conferma appuntamenti Bottega. Rientri campioni press" },
    ],
  },
  produzione: {
    summary: "Il cuore produttivo e operativo dell\u2019azienda: dalla programmazione della produzione al prodotto finito, inclusi qualit\u00E0, gestione sarte, spedizioni, NCR, Bottega e processi aziendali trasversali (HR, avvocato, bandi).",
    hierarchy: [
      { name: "Giulio", role: "Resp. Produzione & Operations", level: 0, desc: "Responsabile di tutta l\u2019area produttiva e operativa: dalla programmazione alla produzione al prodotto finito. Programmazione produzione: pianificazione per collezione e stagione, tempi, priorit\u00E0, assegnazione risorse interne ed esterne. Gestione team: coordinamento Debora, Ada, Federico, Laura N., Laura P., priorit\u00E0 quotidiane, risoluzione problemi. Monitoraggio qualit\u00E0, tempi e performance fornitori produttivi. Elaborazione fabbisogni e RdA per Alice (Acquisti). NCR e resi B2B: comunicazione clienti, coordinamento interno, file NCR condivisi. Aggiornamento indicatori qualit\u00E0 produzione. Filtro HR: interfaccia consulente del lavoro. Strutturazione aziendale: interfaccia avvocato, gestione bandi. Backup urgenze B2B in assenza di Simona (non parte admin). Supervisione produzione Bottega con Laura Nocera e Federico" },
      { name: "Debora Antonini", role: "Resp. Controllo Qualit\u00E0 & Spedizioni Uscita", level: 0, desc: "Responsabile QC finale e spedizioni in uscita. Garantisce che ogni prodotto che lascia l\u2019azienda rispetti gli standard del brand. Controllo qualit\u00E0 finale: rilevamento difetti, verifica standard, segnalazione criticit\u00E0 a Giulio. Packaging e spedizioni uscita: preparazione fisica pacchi B2C (su ordine di Caterina), B2B (su indicazione Simona) e campioni press (su coordinamento Simona/Caterina). Gestione magazzino prodotto finito: inventario, organizzazione, movimentazione. NCR: invio mail NCR ai fornitori, compilazione file NCR interne, tracking risoluzioni. Laura Pontuale la supporta su conformit\u00E0 e preparazione prodotti" },
      { name: "Ada", role: "Gestione Sarte & Lavorazioni Manuali", level: 0, note: "Ruolo autonomo", desc: "Gestisce in autonomia la filiera di cucitura e il coordinamento con le sarte esterne. Rapporto diretto con sarte: assegnazione lavori, tempi, qualit\u00E0, ritiri e consegne. Gestione autonoma dell\u2019intero processo di cucitura: dall\u2019assegnazione al prodotto finito. Preparazione kit per modello e variante, pianificazione di comune accordo con Giulio. Partecipazione attiva allo sviluppo campionario: cucitura prototipi, test lavorazioni. Laura Pontuale la supporta come interfaccia kit sarte e riparazione difetti cucitura" },
      { name: "Federico Costantini", role: "Addetto alla Produzione", level: 1, reportsTo: "Giulio", desc: "Addetto alla produzione con focus su taglio, lavorazione e assemblaggio. Ricezione e smistamento materie prime. Taglio materiali secondo schede tecniche e specifiche. Lavorazione componenti e assemblaggio prodotto. Verifica funzionamento meccanismi e chiusure. Completamento prodotto finito fino al passaggio a QC (Debora). Priorit\u00E0 ricevute esclusivamente da Giulio. Periodi di minor carico (~aprile, fine settembre): manutenzione magazzino, ordine laboratorio, produzione modelli Bottega/Coriolo" },
      { name: "Laura Nocera", role: "Laboratorio & Ricezione Spedizioni", level: 1, reportsTo: "Giulio", desc: "Lavora in laboratorio sulle lavorazioni assegnate da Giulio. Analisi materie prime: qualit\u00E0 e conformit\u00E0. Gestione spedizioni in entrata: ricezione pacchi, verifica integrit\u00E0, consegna DDT ad Alice per registrazione. Supporto organizzazione e inventario magazzino materie prime. Non gestisce spedizioni in uscita (responsabilit\u00E0 di Debora/Valentina). Lavorazioni accessori (clip, ecc.) nei momenti di minor carico. Supporto operativo produzione Bottega sotto supervisione Giulio" },
      { name: "Laura Pontuale", role: "Supporto Gestione Sarte & QC", level: 1, reportsTo: "Debora + Ada", desc: "Figura di supporto trasversale nella Produzione: lavora sia con Debora (QC) sia con Ada (sarte). Controllo conformit\u00E0 in entrata prodotti dalle sarte esterne. Interfaccia per kit sarte con Ada: preparazione e verifica kit. Riparazione difetti di cucitura e finiture. Pulizia, preparazione e finitura prodotti per passaggio a QC (Debora). Supporto operativo spedizioni quando necessario. Supporto Stile in fase campionario. Ripristino resi: gestisce file resi (registra arrivo, tipo difetto, data riparazione), ripara e comunica completamento a Giulio. Regola: minimo 1h/giorno dedicata alla riparazione resi \u2014 B2C per tempestivit\u00E0, B2B entro ~35 giorni" },
    ],
    crossLinks: [
      { person: "Debora", to: "Simona", toDept: "admin", type: "Ponte operativo", why: "Coordinamento per la gestione ordini B2B, spedizioni clienti wholesale e magazzino prodotto finito" },
      { person: "Debora", to: "Caterina", toDept: "digital", type: "Ponte operativo", why: "Preparazione e spedizione ordini B2C. Debora prepara i pacchi, Valentina gestisce DDT e corriere" },
      { person: "Debora", to: "Simona/Caterina", toDept: "admin", type: "Campioni press", why: "Preparazione e spedizione campioni press su coordinamento Simona (logistica) e Caterina (decisione)" },
      { person: "Giulio", to: "Alice", toDept: "admin", type: "Flusso RdA", why: "Giulio elabora fabbisogni e RdA, Alice le inserisce in Team System e gestisce fino a entrata magazzino" },
    ],
    notes: [
      "Agostino interviene direttamente in laboratorio per risolvere problemi operativi",
      "Resi B2C e B2B: file condivisi separati. Laura Pontuale: minimo 1h/giorno dedicata a riparazioni resi \u2014 per B2C \u00E8 fattore strategico, per B2B entro ~35 giorni",
      "Magazzino: Stile ha magazzino separato (campioni inclusi). Magazzino Produzione sotto supervisione Giulio con supporto Laura N. e Federico",
      "Federico: nei periodi di minor carico (~aprile, fine settembre) supporta manutenzione magazzino, ordine laboratorio, produzione Bottega/Coriolo",
      "Bottega/Store: area operativa separata dallo Stile. Produzione Bottega sotto Giulio con Laura Nocera e Federico",
    ],
  },
};

const font = "'Cormorant Garamond', Georgia, serif";
const deptOrder = ["stile", "comunicazione", "digital", "admin", "produzione"];

function MacroChart({ selectedDept, onSelect }) {
  const W = 1000, dirY = 55, splitY = 105, deptY = 195;
  const boxW = 148, boxH = 76;
  const deptX = { stile: 130, comunicazione: 320, digital: 500, admin: 680, produzione: 870 };
  const benX = 225, agoX = 775;
  const benDepts = ["stile", "comunicazione"];
  const agoDepts = ["admin", "produzione"];
  const linkedDepts = new Set();
  if (selectedDept) { linkedDepts.add(selectedDept); DEPT_LINKS.forEach(l => { if (l.from === selectedDept) linkedDepts.add(l.to); if (l.to === selectedDept) linkedDepts.add(l.from); }); }
  const c = [];
  c.push(h("rect", { key: "bg1", x: 30, y: 25, width: 440, height: 115, rx: 8, fill: "#F4F2EE", opacity: 0.5 }));
  c.push(h("text", { key: "t1", x: 44, y: 42, fill: "#B0A898", fontSize: 7, letterSpacing: "0.16em", fontWeight: 500, style: { fontFamily: font } }, "AREA BENEDETTA"));
  c.push(h("rect", { key: "bg2", x: 530, y: 25, width: 440, height: 115, rx: 8, fill: "#F4F2EE", opacity: 0.5 }));
  c.push(h("text", { key: "t2", x: 544, y: 42, fill: "#B0A898", fontSize: 7, letterSpacing: "0.16em", fontWeight: 500, style: { fontFamily: font } }, "AREA AGOSTINO"));
  c.push(h("rect", { key: "bg3", x: 430, y: 25, width: 140, height: 115, rx: 0, fill: "#EAF0EA", opacity: 0.25 }));
  c.push(h("rect", { key: "bb", x: benX-90, y: dirY-24, width: 180, height: 48, rx: 5, fill: "#1A1A18" }));
  c.push(h("text", { key: "bn", x: benX, y: dirY-4, textAnchor: "middle", fill: "#FAFAF6", fontSize: 15, fontWeight: 500, style: { fontFamily: font }, letterSpacing: "0.03em" }, "Benedetta"));
  c.push(h("text", { key: "br", x: benX, y: dirY+11, textAnchor: "middle", fill: "#A09888", fontSize: 8, style: { fontFamily: font }, letterSpacing: "0.08em" }, "Direzione Creativa \u00B7 Comunicazione"));
  c.push(h("rect", { key: "ab", x: agoX-90, y: dirY-24, width: 180, height: 48, rx: 5, fill: "#1A1A18" }));
  c.push(h("text", { key: "an", x: agoX, y: dirY-4, textAnchor: "middle", fill: "#FAFAF6", fontSize: 15, fontWeight: 500, style: { fontFamily: font }, letterSpacing: "0.03em" }, "Agostino"));
  c.push(h("text", { key: "ar", x: agoX, y: dirY+11, textAnchor: "middle", fill: "#A09888", fontSize: 8, style: { fontFamily: font }, letterSpacing: "0.08em" }, "CEO \u00B7 Finanza \u00B7 Produzione"));
  c.push(h("line", { key: "bl", x1: benX, y1: dirY+24, x2: benX, y2: splitY, stroke: "#A09888", strokeWidth: 1, opacity: 0.3 }));
  benDepts.forEach(id => c.push(h("path", { key: "b-"+id, d: "M"+benX+","+splitY+" L"+deptX[id]+","+splitY+" L"+deptX[id]+","+(deptY-boxH/2), fill: "none", stroke: DEPTS[id].color, strokeWidth: 1.2, opacity: 0.3 })));
  c.push(h("line", { key: "al", x1: agoX, y1: dirY+24, x2: agoX, y2: splitY, stroke: "#A09888", strokeWidth: 1, opacity: 0.3 }));
  agoDepts.forEach(id => c.push(h("path", { key: "a-"+id, d: "M"+agoX+","+splitY+" L"+deptX[id]+","+splitY+" L"+deptX[id]+","+(deptY-boxH/2), fill: "none", stroke: DEPTS[id].color, strokeWidth: 1.2, opacity: 0.3 })));
  c.push(h("path", { key: "d1", d: "M"+benX+","+splitY+" L"+deptX.digital+","+splitY+" L"+deptX.digital+","+(deptY-boxH/2), fill: "none", stroke: DEPTS.digital.color, strokeWidth: 0.8, opacity: 0.2, strokeDasharray: "5,3" }));
  c.push(h("path", { key: "d2", d: "M"+agoX+","+splitY+" L"+deptX.digital+","+splitY, fill: "none", stroke: DEPTS.digital.color, strokeWidth: 0.8, opacity: 0.2, strokeDasharray: "5,3" }));
  deptOrder.forEach(id => {
    const d = DEPTS[id], x = deptX[id], isSel = selectedDept === id, isLinked = linkedDepts.size > 0 ? linkedDepts.has(id) : true;
    const data = PEOPLE[id], count = data.hierarchy.length, ch = [];
    if (isSel) ch.push(h("rect", { key: "sh", x: x-boxW/2+2, y: deptY-boxH/2+2, width: boxW, height: boxH, rx: 7, fill: "rgba(0,0,0,0.04)" }));
    ch.push(h("rect", { key: "bx", x: x-boxW/2, y: deptY-boxH/2, width: boxW, height: boxH, rx: 7, fill: isSel ? d.light : "#FFF", stroke: isSel ? d.color : isLinked ? d.color+"50" : d.color+"18", strokeWidth: isSel ? 2.5 : 1, opacity: isLinked ? 1 : 0.5 }));
    ch.push(h("rect", { key: "tp", x: x-boxW/2, y: deptY-boxH/2, width: boxW, height: 5, fill: d.color, opacity: isLinked ? 1 : 0.3 }));
    ch.push(h("text", { key: "lb", x, y: deptY-10, textAnchor: "middle", fill: "#1A1A18", fontSize: 11.5, fontWeight: 600, style: { fontFamily: font }, opacity: isLinked ? 1 : 0.5 }, d.label));
    ch.push(h("text", { key: "ct", x, y: deptY+4, textAnchor: "middle", fill: d.color, fontSize: 8, style: { fontFamily: font }, opacity: isLinked ? 0.7 : 0.3 }, count+" persone"+(data.externals ? " + "+data.externals.length+" esterni" : "")));
    ch.push(h("text", { key: "rp", x, y: deptY+16, textAnchor: "middle", fill: "#A09888", fontSize: 7.5, style: { fontFamily: font }, opacity: isLinked ? 0.6 : 0.25 }, "\u2192 "+d.reportTo));
    ch.push(h("text", { key: "tg", x, y: deptY+boxH/2-6, textAnchor: "middle", fill: d.color, fontSize: 7.5, style: { fontFamily: font }, opacity: 0.4 }, isSel ? "\u25B2 chiudi dettaglio" : "\u25BC apri dettaglio"));
    c.push(h("g", { key: "g-"+id, onClick: () => onSelect(isSel ? null : id), style: { cursor: "pointer" } }, ...ch));
  });
  DEPT_LINKS.forEach((link, i) => {
    const x1 = deptX[link.from], x2 = deptX[link.to], baseY = deptY+boxH/2+4, arcDepth = 14+i*10, arcY = baseY+arcDepth, midX = (x1+x2)/2;
    const isHi = selectedDept ? (selectedDept === link.from || selectedDept === link.to) : false;
    c.push(h("g", { key: "arc-"+i },
      h("path", { d: "M"+x1+","+baseY+" C"+x1+","+arcY+" "+x2+","+arcY+" "+x2+","+baseY, fill: "none", stroke: isHi ? "#1A1A18" : "#B8B0A0", strokeWidth: isHi ? 2 : 1, strokeDasharray: "7,4", opacity: isHi ? 0.5 : 0.18 }),
      h("text", { x: midX, y: arcY-4, textAnchor: "middle", fill: isHi ? "#1A1A18" : "#A09888", fontSize: isHi ? 8 : 7, fontWeight: isHi ? 600 : 400, style: { fontFamily: font }, opacity: isHi ? 0.85 : 0.4 }, link.label)
    ));
  });
  c.push(h("text", { key: "l1", x: 16, y: dirY+2, fill: "#D0C8B8", fontSize: 7, letterSpacing: "0.14em", style: { fontFamily: font } }, "DIREZIONE"));
  c.push(h("text", { key: "l2", x: 16, y: deptY+2, fill: "#D0C8B8", fontSize: 7, letterSpacing: "0.14em", style: { fontFamily: font } }, "REPARTI"));
  return h("svg", { viewBox: "0 0 "+W+" 340", style: { width: "100%", maxWidth: W, display: "block", margin: "0 auto" } }, ...c);
}

function DeptDetail({ deptId, onClose }) {
  const dept = DEPTS[deptId], data = PEOPLE[deptId], s = [];
  s.push(h("div", { key: "hd", style: { padding: "18px 24px", background: "linear-gradient(145deg, "+dept.light+"80, #FFF)", borderBottom: "1px solid "+dept.color+"0C", display: "flex", alignItems: "center", gap: 14 } },
    h("div", { style: { width: 44, height: 44, borderRadius: 10, background: dept.color, display: "flex", alignItems: "center", justifyContent: "center", color: "#FFF", fontSize: 18, fontWeight: 300, fontFamily: font } }, data.hierarchy.length),
    h("div", { style: { flex: 1 } },
      h("div", { style: { fontSize: 19, fontWeight: 600, fontFamily: font } }, dept.label),
      h("div", { style: { fontSize: 10, color: "#A09888", fontFamily: font, marginTop: 2 } }, "Riporta a ", h("strong", { style: { color: "#5A5848" } }, dept.reportTo)),
      h("div", { style: { fontSize: 11, color: "#6A6858", fontFamily: font, marginTop: 4, lineHeight: 1.5 } }, data.summary)
    ),
    h("button", { onClick: onClose, style: { background: "none", border: "1px solid "+dept.color+"25", padding: "5px 14px", fontSize: 10, color: dept.color, cursor: "pointer", fontFamily: font, borderRadius: 5, alignSelf: "flex-start" } }, "\u2715 Chiudi")
  ));
  s.push(h("div", { key: "pp", style: { padding: "16px 24px 8px" } },
    h("div", { style: { fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 12, fontWeight: 500, fontFamily: font } }, "Chi lavora qui"),
    ...data.hierarchy.map((p, i) =>
      h("div", { key: i, style: { display: "flex", alignItems: "flex-start", gap: 12, padding: "12px 0", borderBottom: i < data.hierarchy.length-1 ? "1px solid #F2EEEA" : "none", marginLeft: p.level*28 } },
        h("div", { style: { width: 26, height: 26, borderRadius: 13, flexShrink: 0, background: p.level===0 ? dept.color : dept.light, border: p.level===0 ? "none" : "1.5px solid "+dept.color+"30", color: p.level===0 ? "#FFF" : dept.color, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 10, fontWeight: 600, fontFamily: font } }, p.name.charAt(0)),
        h("div", { style: { flex: 1 } },
          h("div", { style: { display: "flex", alignItems: "center", gap: 6, flexWrap: "wrap" } },
            h("span", { style: { fontSize: 14, fontWeight: 600, fontFamily: font } }, p.name),
            p.badge ? h("span", { style: { fontSize: 7.5, textTransform: "uppercase", color: "#B07030", background: "#B0703010", padding: "2px 8px", fontWeight: 600, fontFamily: font, borderRadius: 3 } }, p.badge) : null,
            p.note ? h("span", { style: { fontSize: 7.5, color: "#5080A0", background: "#5080A008", padding: "2px 8px", fontFamily: font, borderRadius: 3 } }, p.note) : null
          ),
          h("div", { style: { fontSize: 10, color: dept.color, fontFamily: font, marginTop: 2 } }, p.role),
          p.reportsTo ? h("div", { style: { fontSize: 9, color: "#A09888", fontFamily: font, marginTop: 2 } }, "\u2192 Riporta a ", h("strong", null, p.reportsTo)) : null,
          h("div", { style: { fontSize: 11, color: "#4A4840", fontFamily: font, marginTop: 5, lineHeight: 1.65 } }, p.desc)
        )
      )
    )
  ));
  if (data.crossLinks && data.crossLinks.length > 0) {
    s.push(h("div", { key: "cl", style: { padding: "4px 24px 16px" } },
      h("div", { style: { fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" } }, "Connessioni con altri reparti"),
      ...data.crossLinks.map((lk, i) => {
        const td = DEPTS[lk.toDept];
        return h("div", { key: i, style: { padding: "12px 16px", marginBottom: 8, background: td.light+"60", border: "1px solid "+td.color+"10", borderLeft: "4px solid "+td.color+"50", borderRadius: 5 } },
          h("div", { style: { display: "flex", alignItems: "center", gap: 8, flexWrap: "wrap", marginBottom: 5 } },
            h("span", { style: { display: "inline-flex", alignItems: "center", gap: 4, padding: "2px 10px", background: "#FFF", border: "1px solid "+dept.color+"20", borderRadius: 12, fontSize: 11, fontWeight: 600, fontFamily: font } }, h("span", { style: { width: 6, height: 6, borderRadius: 3, background: dept.color, display: "inline-block" } }), " "+lk.person),
            h("span", { style: { fontSize: 14, color: "#C0B8A8" } }, "\u27F6"),
            h("span", { style: { display: "inline-flex", alignItems: "center", gap: 4, padding: "2px 10px", background: "#FFF", border: "1px solid "+td.color+"20", borderRadius: 12, fontSize: 11, fontWeight: 600, fontFamily: font } }, h("span", { style: { width: 6, height: 6, borderRadius: 3, background: td.color, display: "inline-block" } }), " "+lk.to),
            h("span", { style: { fontSize: 7.5, textTransform: "uppercase", color: td.color, fontWeight: 500, fontFamily: font } }, lk.type)
          ),
          h("div", { style: { fontSize: 11, color: "#4A4840", lineHeight: 1.6, fontFamily: font } }, lk.why)
        );
      })
    ));
  }
  if (data.intersections) {
    s.push(h("div", { key: "in", style: { padding: "4px 24px 16px" } },
      h("div", { style: { fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" } }, "Intersezioni con Digital (aree condivise)"),
      h("div", { style: { border: "1px solid #E4E0D8", borderRadius: 6, overflow: "hidden" } },
        h("div", { style: { display: "grid", gridTemplateColumns: "100px 1fr 1fr", background: "#FAFAF6", borderBottom: "1px solid #E4E0D8" } },
          h("div", { style: { padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: "#888" } }, "Area"),
          h("div", { style: { padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: dept.color } }, "Comunicazione"),
          h("div", { style: { padding: "8px 12px", fontSize: 9, fontWeight: 600, fontFamily: font, color: DEPTS.digital.color } }, "Digital")
        ),
        ...data.intersections.map((row, i) =>
          h("div", { key: i, style: { display: "grid", gridTemplateColumns: "100px 1fr 1fr", borderBottom: i < data.intersections.length-1 ? "1px solid #F0ECE4" : "none" } },
            h("div", { style: { padding: "10px 12px", fontSize: 11, fontWeight: 600, fontFamily: font } }, row.area),
            h("div", { style: { padding: "10px 12px", fontSize: 10.5, fontFamily: font, color: "#4A4840", lineHeight: 1.5 } }, row.comms),
            h("div", { style: { padding: "10px 12px", fontSize: 10.5, fontFamily: font, color: "#4A4840", lineHeight: 1.5 } }, row.digital)
          )
        )
      ),
      h("div", { style: { fontSize: 10, color: "#8A8878", fontStyle: "italic", fontFamily: font, marginTop: 8 } }, "Regola: se Fabio e Roberta non trovano un accordo, la decisione sale a Benedetta.")
    ));
  }
  if (data.externals) {
    s.push(h("div", { key: "ex", style: { padding: "4px 24px 18px" } },
      h("div", { style: { fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" } }, "Collaboratori esterni ("+data.externals.length+")"),
      h("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))", gap: 8 } },
        ...data.externals.map((ext, i) =>
          h("div", { key: i, style: { padding: "10px 14px", background: dept.light, border: "1px solid "+dept.color+"0C", borderRadius: 5 } },
            h("div", { style: { fontSize: 11.5, fontWeight: 600, fontFamily: font } }, ext.name),
            h("div", { style: { fontSize: 9.5, color: "#6A6858", fontFamily: font, marginTop: 2 } }, ext.what)
          )
        )
      )
    ));
  }
  if (data.notInScope) {
    s.push(h("div", { key: "nis", style: { padding: "4px 24px 16px" } },
      h("div", { style: { fontSize: 8.5, letterSpacing: "0.16em", textTransform: "uppercase", color: "#A09888", marginBottom: 10, fontWeight: 500, fontFamily: font, paddingTop: 14, borderTop: "1px solid #F0ECE4" } }, "Non in perimetro"),
      ...data.notInScope.map((item, i) =>
        h("div", { key: i, style: { padding: "8px 14px", background: "#F8F7F4", borderLeft: "3px solid #D0C8B8", borderRadius: 3, fontSize: 10.5, color: "#6A6858", lineHeight: 1.6, fontFamily: font, marginBottom: 4 } }, item)
      )
    ));
  }
  if (data.openItems && data.openItems.length > 0) {
    s.push(h("div", { key: "oi", style: { padding: "4px 24px 16px" } },
      ...data.openItems.map((item, i) =>
        h("div", { key: i, style: { padding: "10px 14px", background: item.startsWith("\u26A0") ? "#FFF0F0" : "#FFF8E8", borderLeft: "3px solid "+(item.startsWith("\u26A0") ? "#D04040" : "#E0A030"), borderRadius: 3, fontSize: 11, color: item.startsWith("\u26A0") ? "#8A2020" : "#8A6A20", fontStyle: "italic", lineHeight: 1.65, fontFamily: font, marginBottom: 6 } }, item)
      )
    ));
  }
  if (data.notes) {
    s.push(h("div", { key: "nt", style: { padding: "4px 24px 16px" } },
      ...data.notes.map((n, i) =>
        h("div", { key: i, style: { padding: "10px 14px", background: dept.color+"05", borderLeft: "3px solid "+dept.color+"25", borderRadius: 3, fontSize: 11, color: "#5A5850", fontStyle: "italic", lineHeight: 1.65, fontFamily: font, marginBottom: 6 } }, n)
      )
    ));
  }
  return h("div", { style: { maxWidth: 740, margin: "2px auto 24px", background: "#FFF", border: "1px solid "+dept.color+"18", borderTop: "4px solid "+dept.color, borderRadius: "0 0 8px 8px", boxShadow: "0 4px 20px rgba(0,0,0,0.04)" } }, ...s);
}

function Organigramma() {
  const [sel, setSel] = useState(null);
  return h("div", { style: { fontFamily: font, background: "#F8F7F4", minHeight: "100vh", color: "#1A1A18" } },
    h("header", { style: { textAlign: "center", padding: "36px 20px 14px" } },
      h("div", { style: { fontSize: 10, letterSpacing: "0.45em", textTransform: "uppercase", color: "#A09888" } }, "Organigramma"),
      h("h1", { style: { fontSize: 30, fontWeight: 300, letterSpacing: "0.1em", margin: "4px 0" } }, "Benedetta Bruzziches"),
      h("div", { style: { fontSize: 10, letterSpacing: "0.22em", color: "#B0A898", textTransform: "uppercase" } }, "Febbraio 2026 \u00B7 Rev 7"),
      h("div", { style: { display: "flex", justifyContent: "center", gap: 14, marginTop: 12, flexWrap: "wrap" } },
        ...["16 persone interne", "6 collaboratori esterni", "6 aree operative"].map((t, i) =>
          h("span", { key: i, style: { fontSize: 10, color: "#7A7868", background: "#EFEDE8", padding: "4px 12px", borderRadius: 3 } }, t)
        )
      ),
      h("div", { style: { marginTop: 14, fontSize: 11, color: "#8A8878", lineHeight: 1.7, maxWidth: 600, margin: "14px auto 0" } },
        h("strong", null, "Linee continue"), " = gerarchia. ", h("strong", null, "Archi tratteggiati"), " = collaborazioni operative tra reparti. ", h("br"), "Clicca su un reparto per esplorare chi ci lavora e le connessioni."
      )
    ),
    h("div", { style: { padding: "0 12px" } }, h(MacroChart, { selectedDept: sel, onSelect: setSel })),
    sel ? h("div", { style: { padding: "0 16px" } }, h(DeptDetail, { deptId: sel, onClose: () => setSel(null) })) : null,
    h("div", { style: { maxWidth: 740, margin: "0 auto", padding: "10px 20px 6px", display: "flex", flexWrap: "wrap", gap: 14, justifyContent: "center", fontSize: 9.5, color: "#8A8878" } },
      ...Object.entries(DEPTS).map(([id, d]) =>
        h("span", { key: id, style: { display: "inline-flex", alignItems: "center", gap: 5 } },
          h("span", { style: { width: 9, height: 9, borderRadius: 2, background: d.color, display: "inline-block" } }), d.label
        )
      )
    ),
    h("div", { style: { textAlign: "center", padding: "6px 0 32px", fontSize: 8.5, letterSpacing: "0.18em", color: "#C8C0B0", textTransform: "uppercase" } }, "\u00A9 Benedetta Bruzziches \u00B7 Documento interno \u00B7 Rev 7 \u00B7 26 febbraio 2026")
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(h(Organigramma));
</script>
</body>
</html>
